exports.handler = function(event, context, callback){ 

/*

    Both of the following methods work; the first one was recommended as the most up-to-date
 
*/

var doc = require('dynamodb-doc');
var dynamo = new doc.DynamoDB();
   
var AWS = require('aws-sdk');
var docClient = new AWS.DynamoDB.DocumentClient();

/*  */


var params = {
    TableName: "DeliveredEvents",
    IndexName: "email-timestamp-index",
    KeyConditionExpression:"#email = :emailValue and #date >= :dateValue",
    ExpressionAttributeNames: {
        "#email":"email",
        "#date":"timestamp"
        },
    ExpressionAttributeValues: {
        ":emailValue" : "gregg@gpgnetworking.com",
        ":dateValue" : 1482988277
        }
    };

dynamo.query(params, function(err, data) {
    if (err) console.log(err); // an error occurred
    else console.log(data); // successful response
    callback(null, data);
});


}


